<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dunia Anak Sholeh - Arabika Smart</title>
    <style>
        :root { --primary: #2d6a4f; --secondary: #95d5b2; --accent: #FF6FAE; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; padding: 15px; background: linear-gradient(to bottom, #4FC3F7, #6EE7B7); color: white; text-align: center; min-height: 100vh; }
        
        .section { background: white; color: #333; margin: 20px auto; padding: 20px; border-radius: 25px; max-width: 500px; box-shadow: 0 8px 20px rgba(0,0,0,0.15); }
        .word-grid { display: flex; flex-wrap: wrap; justify-content: center; gap: 8px; }
        .word { background: #FFD93D; padding: 10px 15px; border-radius: 15px; cursor: pointer; font-weight: bold; transition: transform 0.2s; border: 2px solid #F4D03F; font-size: 14px; }
        
        button { background: var(--accent); border: none; padding: 12px 20px; margin: 8px; border-radius: 15px; color: white; cursor: pointer; font-weight: bold; font-size: 16px; transition: 0.3s; }
        button:hover { background: #FF4F81; }
        
        /* Avatar & Animation */
        .avatar { width: 130px; height: 130px; margin: 20px auto; position: relative; cursor: pointer; }
        .hijab { width: 130px; height: 130px; background: radial-gradient(circle at 40% 30%, #FFB6D9, #FF6FAE); border-radius: 50%; position: absolute; box-shadow: inset -5px -8px 15px rgba(0,0,0,0.2); }
        .face { width: 95px; height: 95px; background: #FFE0BD; border-radius: 50%; position: absolute; top: 20px; left: 17px; box-shadow: inset -4px -6px 10px rgba(0,0,0,0.1); }
        .eye { width: 14px; height: 14px; background: black; border-radius: 50%; position: absolute; top: 45px; }
        .eye.left { left: 30px; } .eye.right { right: 30px; }
        .mouth { width: 35px; height: 15px; background: #FF4F81; border-radius: 0 0 35px 35px; position: absolute; bottom: 35px; left: 47px; transition: 0.2s; }
        .talk { height: 25px !important; border-radius: 50% !important; }

        /* Voice Section */
        #output-container { background: #f1f8e9; border-radius: 15px; padding: 15px; margin: 15px 0; border: 2px solid var(--secondary); }
        #output-text { font-size: 24px; color: var(--primary); font-weight: bold; direction: rtl; }
        #translation-text { font-size: 14px; color: #555; margin-top: 5px; font-weight: 600; }
        #tip-text { font-size: 11px; color: #e67e22; margin-top: 8px; font-style: italic; }
        
        .mic-btn { background: var(--primary); width: 70px; height: 70px; border-radius: 50%; font-size: 30px; margin: 10px auto; display: flex; align-items: center; justify-content: center; box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        .listening { background: #e63946; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(230, 57, 70, 0.7); } 70% { box-shadow: 0 0 0 15px rgba(230, 57, 70, 0); } 100% { box-shadow: 0 0 0 0 rgba(230, 57, 70, 0); } }

        .levelbox { background: rgba(255,255,255,0.9); color: #FF6FAE; padding: 10px; border-radius: 20px; max-width: 250px; margin: 10px auto; font-weight: bold; border: 2px solid #FFD93D; }
        .mode-btn { padding: 8px 12px; border-radius: 15px; border: 2px solid var(--primary); background: white; color: var(--primary); cursor: pointer; font-size: 12px; font-weight: bold; }
        .mode-btn.active { background: var(--primary); color: white; }
    </style>
</head>
<body>

<audio id="bgMusic" loop>
    <source src="https://actions.google.com/sounds/v1/ambiences/children_playing.ogg" type="audio/ogg">
</audio>

<div style="font-size:28px; font-weight:bold; text-shadow: 2px 2px 4px rgba(0,0,0,0.2);">ğŸŒ™ Dunia Anak Sholeh</div>
<div class="levelbox" id="levelBox">â­ 0 | ğŸ† Level 1</div>

<div class="avatar" onclick="speak('Ø£Ù‡Ù„Ø§Ù‹ ÙˆØ³Ù‡Ù„Ø§Ù‹')">
    <div class="hijab"></div>
    <div class="face">
        <div class="eye left"></div>
        <div class="eye right"></div>
        <div class="mouth" id="mouth"></div>
    </div>
</div>

<div class="section">
    <h3>ğŸ™ï¸ Tanya Jawab Suara</h3>
    <div class="word-grid" style="margin-bottom: 15px;">
        <button id="mode-ar" class="mode-btn active" onclick="setMode('ar-SA')">Bicara Arab</button>
        <button id="mode-id" class="mode-btn" onclick="setMode('id-ID')">Tebak Benda (Indo)</button>
    </div>
    <div id="output-container">
        <div id="output-text">...</div>
        <div id="translation-text">Klik mic dan bicara</div>
        <div id="tip-text"></div>
    </div>
    <button id="start-mic" class="mic-btn" onclick="startRecognition()">ğŸ™ï¸</button>
    <p id="guide-text" style="font-size: 11px; color: #888;">Ucapkan salam atau kata Arab.</p>
</div>

<div class="section">
    <h3>ğŸ Belajar Buah & Hewan</h3>
    <div class="word-grid" id="materi-list"></div>
</div>

<div class="section" style="background: #FFF9C4;">
    <h3>ğŸ”“ Aktifkan Premium</h3>
    <input type="password" id="kode" style="padding:10px; border-radius:10px; border:1px solid #ccc;" placeholder="Kode: ANAKSOLEH2026">
    <button onclick="unlock()">Unlock</button>
    <div id="status"></div>
</div>

<script>
// DATA DATABASE (Gabungan)
const database = {
    "Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„ÙŠÙƒÙ…": { id: "Assalamu'alaikum", response: "ÙˆØ¹Ù„ÙŠÙƒÙ… Ø§Ù„Ø³Ù„Ø§Ù… ÙˆØ±Ø­Ù…Ø© Ø§Ù„Ù„Ù‡ ÙˆØ¨Ø±ÙƒØ§ØªÙ‡", tip: "Makhraj Sin (Ø³) harus bersih." },
    "ÙƒÙŠÙ Ø­Ø§Ù„Ùƒ": { id: "Apa kabar?", response: "Ø£Ù†Ø§ Ø¨Ø®ÙŠØ± ÙˆØ§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡", tip: "Huruf Kha (Ø®) parau." },
    "tuffah": { id: "Apel", ar: "ØªÙØ§Ø­", tip: "Ha (Ø­) bersih di akhir." },
    "kucing": { ar: "Ù‚Ø·Ø©", tip: "Qof (Ù‚) tebal di pangkal lidah." },
    "apel": { ar: "ØªÙØ§Ø­", tip: "Ha (Ø­) bersih." },
    "pisang": { ar: "Ù…ÙˆØ²", tip: "Zai (Ø²) bergetar." },
    "gajah": { ar: "ÙÙŠÙ„", tip: "Faa (Ù) berhembus." }
};

let premium = localStorage.getItem("premium") === "true";
let level = parseInt(localStorage.getItem("level")) || 1;
let stars = parseInt(localStorage.getItem("stars")) || 0;
let currentMode = 'ar-SA';

// Speech Engine
const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
const recognition = new SpeechRecognition();

function setMode(mode) {
    currentMode = mode;
    document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
    if(mode === 'ar-SA') {
        document.getElementById('mode-ar').classList.add('active');
        document.getElementById('guide-text').innerText = "Ucapkan Salam atau kata Arab.";
    } else {
        document.getElementById('mode-id').classList.add('active');
        document.getElementById('guide-text').innerText = "Sebut nama buah/hewan dalam Bahasa Indonesia.";
    }
}

function startRecognition() {
    recognition.lang = currentMode;
    recognition.start();
    document.getElementById('start-mic').classList.add('listening');
    document.getElementById('translation-text').innerText = "Mendengarkan...";
    document.getElementById('bgMusic').play().catch(e=>{});
}

recognition.onresult = (event) => {
    const result = event.results[0][0].transcript.toLowerCase();
    document.getElementById('output-text').innerText = result;
    document.getElementById('start-mic').classList.remove('listening');
    
    let found = false;
    for (let key in database) {
        if (result.includes(key)) {
            const data = database[key];
            if (currentMode === 'id-ID') {
                document.getElementById('output-text').innerText = data.ar;
                document.getElementById('translation-text').innerText = "Bahasa Arab: " + data.ar;
                speak(data.ar);
            } else {
                document.getElementById('translation-text').innerText = "Arti: " + (data.id || "Ditemukan");
                setTimeout(() => speak(data.response || data.ar), 500);
            }
            document.getElementById('tip-text').innerText = "ğŸ’¡ Tips: " + data.tip;
            found = true;
            stars++; checkLevelUp();
            break;
        }
    }
    if (!found) {
        document.getElementById('translation-text').innerText = "Kata belum ada di modul.";
        document.getElementById('tip-text').innerText = "";
    }
};

recognition.onspeechend = () => {
    recognition.stop();
    document.getElementById('start-mic').classList.remove('listening');
};

function speak(text){
    window.speechSynthesis.cancel();
    let u = new SpeechSynthesisUtterance(text);
    u.lang = "ar-SA";
    u.rate = 0.8;
    document.getElementById("mouth").classList.add("talk");
    u.onend = () => document.getElementById("mouth").classList.remove("talk");
    window.speechSynthesis.speak(u);
}

function checkLevelUp(){
    if(stars >= 10){
        level++; stars = 0;
        alert("Barakallah! Naik ke Level " + level);
        renderMateri();
    }
    localStorage.setItem("stars", stars);
    localStorage.setItem("level", level);
    document.getElementById("levelBox").innerHTML="â­ "+stars+" | ğŸ† Level "+level;
}

function renderMateri(){
    const data = [["ØªÙÙÙ‘ÙØ§Ø­ÙŒ","Apel"],["Ù…ÙÙˆÙ’Ø²ÙŒ","Pisang"],["Ø¨ÙØ±Ù’ØªÙÙ‚ÙØ§Ù„ÙŒ","Jeruk"],["Ù‚ÙØ·Ù‘ÙŒ","Kucing"],["ÙÙÙŠÙ„ÙŒ","Gajah"],["Ø£ÙØ³ÙØ¯ÙŒ","Singa"]];
    let html = "";
    let limit = premium ? data.length : 3;
    for(let i=0; i<limit; i++){
        html += `<div class="word" onclick="speak('${data[i][0]}')">${data[i][0]}<br><small>${data[i][1]}</small></div>`;
    }
    if(!premium) html += `<div style="font-size:12px; color:red; width:100%;">Materi lainnya terkunci ğŸ”’</div>`;
    document.getElementById("materi-list").innerHTML = html;
}

function unlock(){
    if(document.getElementById("kode").value === "ANAKSOLEH2026"){
        premium = true;
        localStorage.setItem("premium", "true");
        document.getElementById("status").innerText = "âœ… Berhasil!";
        renderMateri();
    }
}

// Start
renderMateri();
</script>
</body>
</html>
